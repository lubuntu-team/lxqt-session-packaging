#!/usr/bin/make -f
#export DH_VERBOSE=1

DEB_HOST_ARCH_OS ?= $(shell dpkg-architecture -qDEB_HOST_ARCH_OS)
export DEB_BUILD_MAINT_OPTIONS = hardening=+all
export DEB_LDFLAGS_MAINT_APPEND = -Wl,--as-needed

ifeq ($(DEB_HOST_ARCH_OS),linux)
    CMAKE_ARGS += -DLIBUDEV_MONITOR=ON
else
    CMAKE_ARGS += -DLIBUDEV_MONITOR=OFF
endif

%:
	dh ${@} --buildsystem cmake \
		--parallel

override_dh_auto_configure:
	dh_auto_configure -- $(CMAKE_ARGS)
